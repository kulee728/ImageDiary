<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
    <link rel="icon" href="data:image/png;base64,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"/> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign Up</title>


<link rel="stylesheet" href="/css/signUpStyles.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>



<script type="text/javascript">
	function sendNumber() {
		//$("#mail_number").css("display", "block");
		$.ajax({
			url : "/mail",
			type : "post",
			dataType : "json",
			data : {
				"mail" : $("#emailInput").val()
			},
			success : function(data) {
				alert("인증번호 발송 성공!");
				$("#Confirm").val(data); // 인증번호를 사람 눈에 보이지 않게 저장 input hidden 
			}
		});
	}

	//1. 에이젝스
	//2. 안쓰고 매퍼부터 만들어서 시작
	/* 아이디 중복확인 */
	function idCheck() {
		const member_id = $("#idInput").val();
		$.ajax({
			url : "/idCheck", //back end controller URL
			type : "get",
			data : {
				"member_id" : member_id
			},

			success : function(data) {
				if (data.isCount) {

					alert("사용할 수 있는 아이디입니다.");
				} else {
					alert("이미 사용중인 아이디 입니다.");
				}
			},
			error : function(xhr, status, error) {
				console.log(" err ", error);
				alert("예기치 못한 문제가 발생했습니다. 다시 시도해주세요.");
			}
		});
	}

	/* 인증번호 일치 불일치 */
	function confirmNumber() {
		var enteredNumber = $("#number").val();
		var sentNumber = $("#Confirm").val();

		if (enteredNumber === sentNumber) {
			alert("인증번호가 일치합니다!");
		} else {
			alert("인증번호가 일치하지 않습니다.");

		}
	}

	function signUpSubmit() {
		const id = $("#idInput").val();
		const password = $("#passwordInput").val();
		const confirmPassword = $("#passwordConfirm").val();
		const diaryName = $("#diaryNameInput").val();
		const email = $("#emailInput").val();
		const enteredNumber = $("#number").val();
		const sentNumber = $("#Confirm").val();

		// 아이디 정규식
		const idRegex = /^[a-z0-9]{1,10}$/;
		// 비밀번호 정규식
		const passwordRegex = /^[A-Za-z0-9]{10,20}$/;
		// 이메일 정규식
		const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

		// 유효성 검사
		if (!idRegex.test(id)) {
			alert("아이디는 영소문자, 숫자 조합으로 10자 이내로 입력해야 합니다.");
			return false;
		}

		if (!passwordRegex.test(password)) {
			alert("비밀번호는 영문 대소문자와 숫자 조합으로 10~20자 이내로 입력해야 합니다.");
			return false;
		}

		if (password !== confirmPassword) {
			alert("비밀번호와 비밀번호 확인이 일치하지 않습니다.");
			return false;
		}

		if (diaryName.length >= 10 || diaryName.length <= 2) {
			alert("일기장 이름은 2글자 이상, 10글자 이하로 입력해야 합니다.");
			return false;
		}

		if (!emailRegex.test(email)) {
			alert("올바른 이메일 형식으로 입력해야 합니다.");
			return false;
		}

		if (!enteredNumber || !sentNumber || enteredNumber !== sentNumber) {
			alert("인증번호를 정확히 입력해야 합니다.");
			return false;
		}
		// 모든 조건 통과 시 폼 제출
		alert("회원가입 완료!");
		return true;

	}
</script>

<script>
<!-------비밀번호 일치확인------->
	$(document)
			.ready(
					function() {
						$("#passwordConfirm").on(
								"input",
								function() {
									const passwordInput = $("#passwordInput")
											.val();
									const passwordConfirm = $(this).val();

									if (passwordInput === passwordConfirm) {
										$("#msg").text("비밀번호가 일치합니다.").css(
												"color", "green");
									} else {
										$("#msg").text("비밀번호가 일치하지 않습니다.").css(
												"color", "red");
										//
									}
								});

						/*      
						//일기이름 정규식
						$("#diaryNameInput").on("input", function() {
							const dn = $(this).val();
							const dnType = /^[A-Za-z가-힣0-9]*$/;
							
							if(diaryNameType.test(diaryName)){
								$("#dnTypeMsg")
									.text("일기장이름 형식이 올바릅니다.")
									.css("color", "green");
							} else {
								$("#dnTypeMsg")
									.text("공백이 포함될 수 없습니다.")
									.css("color", "red");
							}
						});
						 */

						//비밀번호 정규식
						$("#passwordInput").on(
								"input",
								function() {
									const pw = $(this).val();
									const pwType = /^[A-Za-z0-9]{10,20}$/;

									if (pwType.test(pw)) {
										$("#pwTypeMsg").text("비밀번호 형식이 올바릅니다.")
												.css("color", "green");
									} else {
										$("#pwTypeMsg").text(
												"10~20자리 영 대/소문자, 숫자").css(
												"color", "red");
										//
									}
								});

						//아이디정규식
						$("#idInput").on(
								"input",
								function() {
									const id = $(this).val();
									const idType = /^[a-z0-9]{0,10}$/;

									if (idType.test(id)) {
										$("#idMsg").text("아이디 형식이 올바릅니다.").css(
												"color", "green");
									} else {
										$("#idMsg").text("10자리 이내 영/소문자, 숫자")
												.css("color", "red");
										//return false;
									}
								});

						//이메일정규식
						$("#emailInput")
								.on(
										"input",
										function() {
											const email = $(this).val();
											const emailType = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

											if (emailType.test(email)) {
												$("#emailMsg").text(
														"이메일 형식이 올바릅니다.").css(
														"color", "green");
											} else {
												$("#emailMsg").text(
														"이메일 형식이 올바르지 않습니다.")
														.css("color", "red");
												//
											}
										});

					});
</script>





</head>
<body>

	<nav class="navbar navbar-expand-lg" style="background-color:#f0f2e1" >
  <a class="navbar-brand" href="#"></a>
  <div class="collapse navbar-collapse" id="navbarNav">
        <a class="nav-link" href="/diaryMain"><img class="icons" src="/img/home-icon.png" style="width:40px;height:40px" ></a>
  </div>
</nav>

<div class="bodys"  style="height: 70vh">
	<div class="container">
		<form th:action="@{/register}" method="post" class="signup-form"
			th:object="${newMem}" onsubmit="return signUpSubmit()">

			<div class="form-group">
				<input type="checkbox"> <label>아이디</label>
				<p class="comment" id="idMsg"></p>
				<input type="text" class="input-text" id="idInput"
					th:field="*{member_id}" placeholder="영소문자, 숫자 10자리 이내">

				<button type="button" class="btn" onclick="idCheck()">중복확인</button>
			</div>


			<div class="form-group">
				<input type="checkbox"> <label>비 &nbsp; 밀<br>번 &nbsp; 호</label>
				<p class="comment" id="pwTypeMsg"></p>
				<input type="password" class="input-text" id="passwordInput"
					th:field="*{member_pw}" placeholder="영 대/소문자, 숫자 10~20자리 이내">
			</div>


			<div class="form-group">
				<input type="checkbox"> <label>비밀번호<br>확&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;인</label>
				<p class="comment" id="msg"></p>
				<input type="password" class="input-text" id="passwordConfirm">
			</div>


			<div class="form-group">
				<input type="checkbox"> <label>일 &nbsp; 기<br>이&nbsp; 름</label> 
				<input type="text" class="input-text" id="diaryNameInput"
					th:field="*{member_diaryName}" placeholder="10글자 이내, 공백 포함될 수 없음">
			</div>


			<div class="form-group">
				<input type="checkbox"> <label>E-MAIL</label>
				<p class="comment" id="emailMsg"></p>
				<input type="email" class="input-text" id="emailInput" th:field="*{member_email}">

				<button type="button" id="sentBtn" name="sendBtn" class="btn"onclick="sendNumber()">코드전송</button>
			</div>


			<div class="form-group">
				<input type="checkbox"> <label>인 &nbsp; 증<br>코 &nbsp; 드</label> 
				<input type="text" name="number" id="number" class="input-text" placeholder="인증번호 입력">

				<button type="button" name="confirmBtn" id="confirmBtn" class="btn" onclick="confirmNumber()">코드확인</button>
			</div>
			<input type="hidden" id="Confirm"> 

			
			<button type="submit" class="submit-btn">SIGN UP</button>
			<!--  onsubmit : 제출에 대한 기능
            onclick : 클릭에 대한 기능
            
             -->


		</form>
	</div>




</div>
    <footer style="color:#f0f2e1;background-color: #BED59A;font-weight:bold; height:60px; line-height:20px; text-align:center">
        <p>
            <br> <span>&copy; 2024 CodingCoggies. All Rights
                Reserved.</span> <br>
            <br>
        </p>
    </footer>
</body>
</html>